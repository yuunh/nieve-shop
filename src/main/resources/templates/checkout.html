<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>주문서</title>
  <link rel="icon" href="img/favicon.png">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <!-- animate CSS -->
  <link rel="stylesheet" href="css/animate.css">
  <!-- owl carousel CSS -->
  <link rel="stylesheet" href="css/owl.carousel.min.css">
  <!-- nice select CSS -->
  <link rel="stylesheet" href="css/nice-select.css">
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="css/all.css">
  <!-- flaticon CSS -->
  <link rel="stylesheet" href="css/flaticon.css">
  <link rel="stylesheet" href="css/themify-icons.css">
  <!-- font awesome CSS -->
  <link rel="stylesheet" href="css/magnific-popup.css">
  <!-- swiper CSS -->
  <link rel="stylesheet" href="css/slick.css">
  <link rel="stylesheet" href="css/price_rangs.css">
  <!-- style CSS -->
  <link rel="stylesheet" href="css/style.css">

  <script src="https://cdn.portone.io/v2/browser-sdk.js"></script>
</head>

<body>
  <!--::header part start::-->
  <div th:replace="fragments/header :: 'header'"></div>
  <!-- Header part end-->

  <!--================Home Banner Area =================-->
  <!-- breadcrumb start-->
  <section class="breadcrumb breadcrumb_bg">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <div class="breadcrumb_iner">
            <div class="breadcrumb_iner_item">
              <h2>주문서</h2>
              <p>Home <span>-</span> Shop Single</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- breadcrumb start-->

  <!--================Checkout Area =================-->
  <section class="checkout_area padding_top">
    <div class="container">
      <div class="billing_details">
        <div class="row">
          <div class="col-lg-8">
            <h3>주문자 정보</h3>
            <form class="row contact_form" action="#" method="post" novalidate="novalidate">
              <div class="col-md-12 form-group p_star">
                <input type="text" class="form-control" name="name" />
                <span class="placeholder" data-placeholder="주문하신 분"></span>
              </div>
              <div class="col-md-12 form-group p_star">
                <input type="text" class="form-control" name="number" />
                <span class="placeholder" data-placeholder="연락처"></span>
              </div>
              <div class="col-md-12 form-group p_star">
                <input type="text" class="form-control" name="email" />
                <span class="placeholder" data-placeholder="이메일"></span>
              </div>

              <h3>배송 정보</h3>
              <div class="col-md-12 form-group p_star">
                <input type="text" class="form-control" name="name" />
                <span class="placeholder" data-placeholder="받으실 분"></span>
              </div>
              <div class="col-md-12 form-group p_star">
                <input type="text" class="form-control" id="number" name="number" />
                <span class="placeholder" data-placeholder="연락처"></span>
              </div>
              <div class="col-md-6 form-group p_star">
                <input type="text" class="form-control"/>
                <span class="placeholder" data-placeholder="우편번호"></span>
              </div>
              <div class="col-md-6 form-group p_star">
                <button id="zipcodeBtn" type="button" class="btn btn-outline-primary" onclick="selectZipcode();" style="user-select: auto !important;">우편번호 검색</button>
              </div>
              <div class="col-md-6 form-group p_star">
                <input type="text" class="form-control"/>
                <span class="placeholder" data-placeholder="주소"></span>
              </div>
              <div class="col-md-6 form-group p_star">
                <input type="text" class="form-control"/>
                <span class="placeholder" data-placeholder="상세주소"></span>
              </div>
              <div class="col-md-12 form-group p_star">
                <input type="text" class="form-control"/>
                <span class="placeholder" data-placeholder="배송메세지(100자내외)"></span>
              </div>

              <div class="container mt-5">
                <table class="table table-bordered">
                  <thead class="thead-light">
                  <tr>
                    <th>상품명</th>
                    <th>수량</th>
                    <th>상품금액</th>
                  </tr>
                  </thead>
                  <tbody>
                  <tr>
                    <td>
                      <div class="media">
                        <img src="https://cdn3-aka.makeshop.co.kr/shopimages/09women/0360080067193.gif" class="mr-3" alt="상품 이미지" style="width: 50px;">
                        <div class="media-body">
                          <h5 class="mt-0" name="productName">쿨링드 썸머 와이드 팬츠</h5>
                        </div>
                      </div>
                    </td>
                    <td>1</td>
                    <td name="productPrice">10,000원</td>
                  </tr>
                  </tbody>
                </table>
                <table class="table">
                  <tbody>
                  <tr class="total">
                    <td colspan="3" class="text-right"><strong>총 상품 금액:</strong></td>
                    <td>59,800원</td>
                  </tr>
                  <tr>
                    <td colspan="3" class="text-right"><strong>배송비:</strong></td>
                    <td>2,500원</td>
                  </tr>
                  <tr>
                    <td colspan="3" class="text-right"><strong>결제 예정 금액:</strong></td>
                    <td>62,300원</td>
                  </tr>
                  </tbody>
                </table>
              </div>
            </form>
          </div>

          <div class="col-lg-4">
            <div class="order_box">
              <h2>최종 결제 금액</h2>
              <ul class="list">
                <li>
                  <a href="#">상품금액
                    <span>62000원</span>
                  </a>
                </li>
                <li>
                  <a href="#">배송비
                    <span>2000원</span>
                  </a>
                </li>
                <li>
                  <a href="#">할인금액
                    <span>0원</span>
                  </a>
                </li>
                <li>
                  <a href="#">추가금액
                    <span>0원</span>
                  </a>
                </li>
                <li>
                  <a href="#">최종 결제금액
                    <span id="subtotal">63000</span>
                  </a>
                </li>
              </ul>
              <a class="btn_3" onclick="javascript:confirmBuy()">결제하기</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!--================End Checkout Area =================-->

  <!--::footer_part start::-->
  <div th:replace="fragments/footer :: 'footer'"></div>
  <!--::footer_part end::-->

  <!-- jquery plugins here-->
  <!-- jquery -->
  <script src="js/jquery-1.12.1.min.js"></script>
  <!-- popper js -->
  <script src="js/popper.min.js"></script>
  <!-- bootstrap js -->
  <script src="js/bootstrap.min.js"></script>
  <!-- easing js -->
  <script src="js/jquery.magnific-popup.js"></script>
  <!-- swiper js -->
  <script src="js/swiper.min.js"></script>
  <!-- swiper js -->
  <script src="js/masonry.pkgd.js"></script>
  <!-- particles js -->
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.nice-select.min.js"></script>
  <!-- slick js -->
  <script src="js/slick.min.js"></script>
  <script src="js/jquery.counterup.min.js"></script>
  <script src="js/waypoints.min.js"></script>
  <script src="js/contact.js"></script>
  <script src="js/jquery.ajaxchimp.min.js"></script>
  <script src="js/jquery.form.js"></script>
  <script src="js/jquery.validate.min.js"></script>
  <script src="js/mail-script.js"></script>
  <script src="js/stellar.js"></script>
  <script src="js/price_rangs.js"></script>
  <!-- custom js -->
  <script src="js/custom.js"></script>

  <script type="text/javascript">

    function confirmBuy(){

      const names = $("h5[name=productName]")
      const count = names.size();
      const firstName = names.first().text();

      console.log("count : " + count);
      console.log("first name : " + firstName);

      const orderName = (count > 1) ? firstName + " 외 " + (count - 1) : firstName;

      const priceSum = parseInt($("#subtotal").text());

      PortOne.requestPayment({
        // Store ID 설정

        storeId: "store-75557aa8-5f21-452a-9e2c-0ea435b48e2a",
        // 채널 키 설정
        channelKey: "channel-key-fa24fffc-de3e-40e0-ae09-ddc7835e7721",
        paymentId: `payment-${crypto.randomUUID()}`,
        orderName: orderName,
        totalAmount: priceSum,
        currency: "CURRENCY_KRW",
        payMethod: "EASY_PAY",
      }).then(r  => console.log(r));
    }
  </script>
</body>

</html>